% !TeX root = 000-main.tex
\documentclass[000-main.tex]{subfiles}

\begin{document}

\subsection{Schemes}%
\label{sec:schemes}

Suppose $A$ is a (commutative) ring, and recall that an ideal $\mathfrak{p}\subset A$ is \emph{prime} if $ab\in\mathfrak{p}\implies a\in \mathfrak{p}$ or $b\in\mathfrak{p}$.
As a matter of convention, we will assume that a prime ideal is necessarily not equal to the entire ring.
We can now associate a topological space to $A$,
\begin{definition}
  Let,
  \[
	\Spec A := \lbrace\text{prime ideals in }A\rbrace.
  \]
  Moreover, for an ideal $\mathfrak{a}$ let the \emph{variety} or \emph{vanishing} of $\mathfrak{a}$ be,
  \[
	V(\mathfrak{a}) := \lbrace\mathfrak{b} \in \Spec A \, | \, \mathfrak{a} \subseteq \mathfrak{b} \rbrace,
  \]
  We define a topology on $\Spec A$ by letting the $V(\mathfrak{a})$ be the closed sets.
  This is analogous to the Zariski topology on a variety.
\end{definition}

\begin{remark}[Notation and Principal Open Sets]
  For a general $S\subset A$, we define $V(S)$ to be the vanishing of the ideal generated by $S$.
  If $S = \left\{ f \right\}$, we will often just write $V(f)$.

  It can be useful for some proofs to work with an open basis of the topology.
  This is provided by the \emph{principal open sets} $D(f) := \Spec A\setminus V(f)$ for any $f \in A$.
\end{remark}

\begin{lemma}[\citeauthor{hartshorneAlgebraicGeometry1977}~{\cite[][70]{hartshorneAlgebraicGeometry1977}} Lemma II.2.1]
  The topology defined really is a topology.
\end{lemma} 

\begin{example}[Fields and Polynomial Rings]
  \begin{itemize}
    Suppose $k$ is a field.
    \item If $A = k$, the only prime ideal of $A$ is $(0)$, so $\Spec k$ is a point.
    Note the Krull dimension of $k$ is 0.

    \item Consider now $A = k[x]$.
    We then have prime ideals $(0)$ and $(f)$ where $f$ is an irreducible polynomial.
    When $k$ is algebraically closed the only irreducibles are of the form $x-a$ where $a \in k$.

    Clearly $(0)$ is never in the closure of any ideal (except itself), and $V(x-a) = \qty{(x-a)}$, so each $(x-a)$ is a closed point. % GC to LDH: What do you mean by closure here?
    We see that the closed points are in bijection with the underlying field.

    \item For one more example in this vein, consider $A = k[x, y]$ where we will again assume $k$ to be algebraically closed.
    The points in $\Spec$ are given by $(0)$, $(f)$ for $f \in k[x, y]$ irreducible, and $(x-a, y-b)$ for $a,b \in k$.
    The closed points are the $(x-a, y-b)$.

    Given $f$ such that $f(a,b)=0$, we see that $V(f) \cap V((x-a, y-b)) = V((x-a, y-b))$, so now the Krull dimension is 2, and we have generic points distributed along the zero locus of any irreducible $f$.
  \end{itemize}
\end{example}

\begin{remark}
  In the examples above we have seen that for the rings $R$ in question $\dim R[x] = \dim R + 1$.
  It is easy to see that $\dim R[x] \geq \dim R + 1$, and in fact for Noetherian rings equality holds, and this is the last exercise in \citeauthor{atiyahIntroductionCommutativeAlgebra2000}~\cite{atiyahIntroductionCommutativeAlgebra2000}.
\end{remark}

\paragraph{Topology of $\Spec A$}

It is useful to recall some topological facts about $\Spec A$ which we collect here.
Proofs can be found in \citeauthor{altmanTermCommutativeAlgebra2013}~\cite[][ยง13]{altmanTermCommutativeAlgebra2013}.

First, recall the \emph{Scheinnullstellensatz},
\begin{theorem}
  Let $A$ be a ring, $\mathfrak{a}\subset A$ then ideal, then
  \begin{displaymath}
    \sqrt{\mathfrak{a}} := \left\{ x\in A \mid \exists n\in\Zpl, x^n\in \mathfrak{a} \right\} = \bigcap_{\mathfrak{p}\supset\mathfrak{a}}\mathfrak{p}
  \end{displaymath}
  for all prime ideals $\mathfrak{p}\subset A$.
  If $\mathfrak{a}$ is contained in no prime ideals, the intersection is defined to be $A$.
\end{theorem}

\begin{lemma}[Antitone Galois Correspondence for Varieties]
  Let $A$ be a ring, $\mathfrak{a}, \mathfrak{b}\subset A$ ideals.
  Then,
  \begin{itemize}
    \item $\mathfrak{a}\subset \mathfrak{b}\implies V(\mathfrak{a}) \supset V(\mathfrak{b})$
    \item $V(\mathfrak{a}) \supset V(\mathfrak{b}) \implies \mathfrak{a} \subset \sqrt{\mathfrak{b}}$
    \item $V(\mathfrak{a}) = V(\mathfrak{b}) \iff \sqrt{\mathfrak{a}} = \sqrt{\mathfrak{b}}$
    \item $V(\mathfrak{a}) \cup V(\mathfrak{b}) = V(\mathfrak{a} \cap \mathfrak{b}) = V(\mathfrak{a}\mathfrak{b})$
    \item $\bigcap_\lambda V(\mathfrak{a}_\lambda) = V\qty(\sum_\lambda \mathfrak{a}_\lambda)$
  \end{itemize}
  In short, $V$ is an antitone Galois correspondence from the lattice of radical ideals of $A$ to the lattice of closed sets of $\Spec A$ (both ordered by inclusion).
\end{lemma}
This yields a corollary about maximal ideals,
\begin{corollary}
  If $\mathfrak{p}\in\Spec A$ is maximal, then the point $\left\{ \mathfrak{p} \right\}$ is closed, that is $V(\mathfrak{p}) = \left\{ \mathfrak{p} \right\}$.
\end{corollary}

And the following corollaries for principal open sets,
\begin{corollary}
  Let $A$ be a ring, $f, g\in A$.
  Then
  \begin{itemize}
    \item $(f) \subset (g)$ (equivalently, $f$ divides $g$) $\implies D(f) \subset D(g)$
    \item $D(f) \subset D(g) \implies (f) \subset \sqrt{(g)}$ (equivalently, $f$ divides some positive power of $g$)
    \item $D(f) = D(g) \iff \sqrt{(f)} = \sqrt{(g)}$
    \item $D(f) \cap D(g) = D(fg)$
    \item $\bigcup_\lambda D(f_\lambda) = D(\sum_\lambda f_\lambda)$
  \end{itemize}
\end{corollary}

\begin{proposition}
  Let $A$ be a ring, then $\Spec A$ is a \emph{quasi-compact} topological space.
  That is, if $\Spec A = \bigcup_{\lambda\in \Lambda}U_\lambda$, then there exists a finite subcover, $\Spec A = \bigcup_{i = 1}^n U_{\lambda_i}$ for some ${\qty{\lambda_i}}^n_{i = 1}\subset \Lambda$.
\end{proposition}
N.B.\ this property is what non-(algebraic geometers) would usually call compactness.
Instead of proving this proposition, we will prove the slightly more general statement below,
\begin{proposition}
  The principal open sets $D(f)$ are quasi-compact with the subspace topology.
\end{proposition}

\subsubsection{The Structure Sheaf}%
\label{sec:structure-sheaf}

We now want to define a sheaf over $\Spec A$.
However, it is useful to recall some ideas about localisation before proceeding.
All of these facts can be found in~\cite[][81-86]{altmanTermCommutativeAlgebra2013} or~\cite[][36-49]{atiyahIntroductionCommutativeAlgebra2000}.

\paragraph{Localisation}

Recall that $S\subset A$ is \emph{multiplicative} if $a, b\in S \implies ab\in S$.
The \emph{localisation of $A$ away from $S$} is the ring consisting of pairs,
\begin{displaymath}
  S^{-1}A := \left\{ a/s \mid s\in S, a\in A \right\}/\sim
\end{displaymath}
where,
\begin{displaymath}
  a/s \sim b/t \iff
  \exists u\in S^{-1}, u(at - bs) = 0
\end{displaymath}

There are two particularly important examples of localisations:
\begin{itemize}
  \item localising away from $\left\{a, a^2, \ldots \right\}$ for $a\in A$, and
  \item localising away from $A\setminus\mathfrak{p}$ for some prime ideal $\mathfrak{p}\subset A$.
\end{itemize}
we call the first \emph{localising away from $a$} and the second \emph{localising at $\mathfrak{p}$}.

Confusingly, these rings are commonly written $A_a$ and $A_{\mathfrak{p}}$ respectively.
Even more frustratingly, the usage of localisation \emph{at} vs.\ localisation \emph{away from} is also subject to convention.
GC suggests using \emph{at} only when we are localising with respect to the complement of a prime ideal, and \emph{away from} for anything else.

In the particular case of localising at primes, $A_\mathfrak{p}$ is an example of a \emph{local ring}, i.e.\ one with a unique maximal ideal, $\mathfrak{p}$.
Moreover, given a homomorphism of rings, $\phi : A \to B$, and $\mathfrak{q}\subset B$ prime, we have a homomorphism of local rings $\phi_{\mathfrak{q}} : A_{\phi^{-1}(\mathfrak{q})} \to B_{\mathfrak{q}}$.

\paragraph{The Structure Sheaf}

\begin{definition}
  Let $\mathcal{O}$ be a sheaf on $\Spec A$ given by,
  \[
    \mathcal{O}(U) = \qty{
      s \in \Gamma\qty(U, \bigsqcup_{\mathfrak{p} \in U} A_{\mathfrak{p}})
      \middle\vert
      \forall \mathfrak{p}\in U,
      \exists f \in A,
      \exists V\in \mathcal{N}(\mathfrak{p}, U\cap D(f)),
      \forall \mathfrak{q} \in V, s(\mathfrak{q}) \in A_f
    }
  \]
  where $\mathcal{N}(p, U)$ is the set of open neighbourhoods of $p$ contained in $U$.
\end{definition}
The condition just says that the function $s$ looks locally like a quotient, mimicking the definition of a regular function on a variety (which is locally a quotient of polynomials).

\begin{lemma}
  The stalk $\mathcal{O}_{\mathfrak{p}}$ is isomorphic to $A_{\mathfrak{p}}$, not just as a ring but as a local ring.
\end{lemma}

We shall call the pair $(\Spec A, \mathcal{O})$ the \emph{spectrum} of $A$. 

\begin{definition}
  We shall call a pair $(X, \mathcal{O}_X)$, where $X$ is a topological space and $\mathcal{O}_X$ is a sheaf of rings over it, a \emph{ringed space}.
  Define a morphism of ringed spaces to be a pair $(f : X \to Y, f^\sharp : \mathcal{O}_Y \to f_\ast \mathcal{O}_X)$, where $f, f^\sharp$ are morphisms in the corresponding categories.

  We shall say that $(X, \mathcal{O}_X)$ is moreover a \emph{locally ringed space} if the stalk $\mathcal{O}_{X, P}$ at $P \in X$ is a local ring and $f^\sharp_P : \mathcal{O}_{Y, f(P)} \to \mathcal{O}_{X, P}$ is a local ring hom.
\end{definition}

\begin{example}
  $(\Spec A, \mathcal{O})$ is a locally ringed space, and moreover the assignment $A \mapsto (\Spec A , \mathcal{O})$ is a contravariant functor.
\end{example}

These brief preliminaries have led up to the definition we wanted in this section. 

\begin{definition}
  An \emph{affine scheme} is a locally ringed space $(X, \mathcal{O}_X)$ which is isomorphic to $(\Spec A, \mathcal{O})$ for some $A$.
  A \emph{scheme} is a locally ringed space such that $\forall P \in X$, $\exists U \subseteq X$ open containing $P$ such that $(U, \left . \mathcal{O}_X \right \rvert_{U})$ is an affine scheme.
\end{definition}

\begin{example}
  \marginnote{LDH: Give a non-proj example of something which isn't an affine scheme.}
\end{example}

One important example of a scheme that is not affine will be $\Proj$, defined as follows: given a graded ring $S$ (with $S_+ = \bigoplus_{d > 0 } S_d$) the underlying topological space is 
\[
  \Proj S = \left \lbrace \mathfrak{p} \text{ homogeneous prime ideal} \, | \, S_+ \subsetneq \mathfrak{p} \right \rbrace ,
\] 
with topology and sheaf defined as before, but now with the sheaf given by maps into $\bigcup_{\mathfrak{p} \in U} S_{(\mathfrak{p})}$, where $S_{(\mathfrak{p})}$ is the ring of degree-0 elements of $T^{-1}S$ for $T$ the homogeneous elements not in $\mathfrak{p}$, and we require the sections to be locally a ration of element of the same fixed degree (equivalent to saying the map is into the degree 0 part). 

\marginnote{GC: Discussion about why this is locally affine required.}
\end{document}

% Local Variables:
% TeX-master: "000-main.tex"
% TeX-engine: luatex
% End:
